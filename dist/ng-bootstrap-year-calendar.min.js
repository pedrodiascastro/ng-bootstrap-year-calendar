!function(){"use strict";angular.module("ng.bootstrap.year.calendar",["ui.bootstrap.datetimepicker"]).constant("uibYearCalendarConfig",{tplPopover:'<div class="event-tooltip-content"><div class="event-name" style="color: #000">{{day.event}}</div></div>',tplAddEvent:'<div class="modal-content"><div class="modal-header"><button type="button" class="close" ng-click="cancel()">&times;</button><h4 class="modal-title"><b>Evento</b></h4></div><div class="modal-body"><form name="formEvent" role="form" novalidate autocomplete="off"><div class="form-group"><div class="col-sm-12" ng-class="{ \'has-error\': formEvent.type.$invalid }"><label for="type"><small>Tipo</small></label><input type="text" name="type" class="form-control" ng-model="event.type" ng-required="true"></input><div class="help-block" ng-messages="formEvent.type.$error" ng-if="formEvent.type.$invalid"><ui-erros></ui-erros></div></div><div class="col-xs-12 col-sm-6" ng-class="{ \'has-error\': formEvent.dt_ini.$invalid }"><label for="dt_ini"><small>De:</small></label><p class="input-group"><input type="text" class="form-control" name="dt_ini" ng-required="true"close-text="Close"placeholder="DD-MM-AAAA"uib-datepicker-popup="dd-MM-yyyy"ng-model="event.dt_ini"is-open="datepickers.dt_ini"datepicker-options="dateOptions1"close-text="Close" /><span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="open($event, \'dt_ini\')"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class="help-block" ng-messages="formEvent.dt_ini.$error" ng-if="formEvent.dt_ini.$invalid"><ui-erros></ui-erros></div></div><div class="col-xs-12 col-sm-6" ng-class="{ \'has-error\': formEvent.dt_fim.$invalid }"><label for="dt_ini"><small>a:</small></label><p class="input-group"><input type="text" class="form-control" name="dt_fim" ng-required="true"close-text="Close"placeholder="DD-MM-AAAA"uib-datepicker-popup="dd-MM-yyyy"ng-model="event.dt_fim"is-open="datepickers.dt_fim"datepicker-options="dateOptions1"close-text="Close" /><span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="open($event, \'dt_fim\')"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class="help-block" ng-messages="formEvent.dt_fim.$error" ng-if="formEvent.dt_fim.$invalid"><ui-erros></ui-erros></div></div></div></form><div class="clearfix"></div></div><div class="modal-footer"><button type="button" class="btn btn-primary" ng-click="ok()" ng-disabled="okDisabled || formEvent.$invalid"> <i class="fa fa-check"></i> Confirmar</button><button type="button" class="btn btn-default" ng-click="cancel()"> &laquo; Voltar</button></div></div>',dates:{days:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],daysShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],daysMin:["Do","Se","Te","Qu","Qu","Se","Sa"],months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthsShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],weekShort:"S",weekStart:0}}).directive("uibContextMenu",[function(){return{restrict:"A",scope:"@&",compile:function(a,b,c){return{post:function(a,b,c,d){var e=$("#"+c.uibContextMenu),f=null;e.css({display:"none"}),$(b).bind("contextmenu",function(a){a.preventDefault(),e.css({position:"fixed",display:"block",left:a.clientX+"px",top:a.clientY+"px"}),f=a.timeStamp}),$(document).click(function(a){var b=$(a.target);if(!b.is(".popover")&&!b.parents().is(".popover")){if(f===a.timeStamp)return;e.css({display:"none"})}})}}}}}]).directive("uibYearCalendar",["$window","$templateCache","$uibModal",function(a,b,c){return{replace:!0,restrict:"AE",template:'<div class="calendar" id="persCal" ng-mouseup="endSelect($event)">\n<div class="calendar-header panel">\n<table>\n<th class="prev" ng-click="setYear(thisyear-1)"><span class="glyphicon glyphicon-chevron-left"></span></th>\n<th class="year-title year-neighbor2 hidden-sm hidden-xs" ng-click="setYear(thisyear-2)">{{thisyear-2}}</th>\n<th class="year-title year-neighbor hidden-xs" ng-click="setYear(thisyear-1)">{{thisyear-1}}</th>\n<th class="year-title" >{{thisyear}}</th>\n<th class="year-title year-neighbor hidden-xs" ng-click="setYear(thisyear+1)">{{thisyear+1}}</th>\n<th class="year-title year-neighbor2 hidden-sm hidden-xs" ng-click="setYear(thisyear+2)">{{thisyear+2}}</th>\n<th class="next" ng-click="setYear(thisyear+1)"><span class="glyphicon glyphicon-chevron-right"></span></th>\n</table>\n</div>\n<div class="months-container" style="display: block;">\n<div class="month-container repeated-item" ng-class="monthContainerClass" ng-repeat="month in calendar">\n<table class="month" uib-year-cal-context-menu="context1" >\n<thead><tr><th class="month-title bg-skin" colspan="7">{{dates.months[month.m]}}</th></tr>\n<tr><th class="day-header text-muted" ng-repeat="days in dates.daysShort track by $index">{{days}}</th></tr>\n</thead>\n<tbody><tr ng-repeat="week in month.w">\n<td ng-repeat="day in week track by $index" class="{{day.class}}" ng-class="day.oeclass"\nng-style="styleFn(mouseHoverList, thisyear, month.m, day.dd)"\nng-mousedown="initSelect($event, thisyear, month.m, day.dd)"\nng-mousemove="moveSelect($event, thisyear, month.m, day.dd)"\nng-mouseup="endSelect($event)"\nuib-context-menu="context1">\n<div popover-enable="{{day.showevent}}"\nuib-popover-template="\'tplCalPopover.html\'"\npopover-trigger="mouseenter"\nclass="day-content" ng-class="day.oclass" ng-show="day.dd">{{day.dd}}</div>\n</td></tr>\n</tbody>\n</table>\n</div>\n</div>\n<ul id="context1" class="dropdown-menu">\n<li><a ng-click="myclick2()"><i class="fa fa-fw fa-edit"></i><small> Editar</small></a></li>\n<li><a ng-click="delete()"><i class="fa fa-fw fa-times"></i><small> Cancelar</small></a></li>\n<li class="divider"></li>\n<li><a ng-click="properties()"><i class="fa fa-fw fa-cog"></i><small> Propriedades</small></a></li>\n</ul>\n</div>\n',controller:["$scope","$filter","uibYearCalendarConfig",function(d,e,f){function g(a){for(var b,c,e,f,g,h,i,j,k=[],l=new Date,m=0;m<12;m++){for(f={y:a,m:m,w:[]},b=new Date(a,m,1),c=new Date(b.getTime()),e=new Date(a,m+1,0);c.getDay()!==d.dates.weekStart;)c.setDate(c.getDate()-1);for(;c<=e;){var n=[];do{c<b?n.push({class:"day old"}):c>e?n.push({class:"day new"}):(g="",i="",j=!1,h="",c.getFullYear()===l.getFullYear()&&c.getMonth()===l.getMonth()&&c.getDate()===l.getDate()&&(g="cal-unico-today",i="Hoje",j=!0),n.push({dd:c.getDate(),class:"day",oclass:g,oeclass:h,event:i,showevent:j})),c.setDate(c.getDate()+1)}while(c.getDay()!==d.dates.weekStart);f.w.push(n)}k.push(f)}return k}function h(a,b){c.open({templateUrl:"tplCalEvent.html",size:"md",controller:["$scope","$uibModalInstance",function(c,d){c.event={},c.event.dt_ini=a[0],c.event.dt_fim=a[1],c.datepickers={dt_ini:!1,dt_fim:!1},c.open=function(a,b){c.datepickers[b]=!0},c.dateOptions={formatYear:"yyyy",startingDay:1},c.format="dd-MM-yyyy",c.ok=function(){for(var a=c.event.dt_ini,e=c.event.dt_fim;a<=e;){for(var f=0;f<12;f++)if(b[f].y===a.getFullYear()&&b[f].m===a.getMonth())for(var g=0;g<b[f].w.length;g++)for(var h=0;h<b[f].w[g].length;h++)b[f].w[g][h].dd===a.getDate()&&(b[f].w[g][h].oeclass="bg-light-blue-active",b[f].w[g][h].event=c.event.type,b[f].w[g][h].showevent=!0);a.setDate(a.getDate()+1)}d.dismiss("ok")},c.cancel=function(){d.dismiss("cancel")}}]})}function i(a){var b,c=angular.element(document.getElementById("persCal")).context.clientWidth;b=a?188:document.querySelectorAll(".month")[0].clientWidth,d.monthContainerClass=6*b<c?" col-xs-2":4*b<c?" col-xs-3":3*b<c?" col-xs-4":2*b<c?" col-xs-6":" col-xs-12",a||d.$digest()}b.put("tplCalPopover.html",f.tplPopover),b.put("tplCalEvent.html",f.tplAddEvent),d.dates=f.dates,d.rangeDates=[];var j=!1;d.mouseHoverList=[],d.myclick2=function(){console.log("MENU DE CONTEXTO!")},d.thisyear=(new Date).getFullYear(),d.calendar=g(d.thisyear),d.setYear=function(a){d.calendar=[],d.thisyear=a,d.calendar=g(d.thisyear)},d.styleFn=function(a,b,c,d){if(a.length>1){var e=new Date(a[0].year,a[0].month,a[0].day),f=new Date(a[1].year,a[1].month,a[1].day),g=new Date(b,c,d);if(g>=e&&g<=f)return{"background-color":"rgba(0,0,0,.2)"}}},d.initSelect=function(a,b,c,e){if(1===a.which){if(d.rangeDates=[],d.mouseHoverList=[],e){var f=new Date(b,c,e);d.rangeDates.push(f),d.mouseHoverList[0]={year:b,month:c,day:e},d.mouseHoverList[1]={year:b,month:c,day:e}}j=!0}},d.moveSelect=function(a,b,c,e){if(j&&e){var f=new Date(b,c,e);null==d.rangeDates[0]&&(d.rangeDates[0]=f,d.mouseHoverList[0]={year:b,month:c,day:e},d.mouseHoverList[1]={year:b,month:c,day:e}),f<d.rangeDates[0]?(d.mouseHoverList[0]={year:b,month:c,day:e},d.mouseHoverList[1]={year:d.rangeDates[0].getFullYear(),month:d.rangeDates[0].getMonth(),day:d.rangeDates[0].getDate()}):f>d.rangeDates[0]?(d.mouseHoverList[1]={year:b,month:c,day:e},d.mouseHoverList[0]={year:d.rangeDates[0].getFullYear(),month:d.rangeDates[0].getMonth(),day:d.rangeDates[0].getDate()}):f>new Date(d.mouseHoverList[0].year,d.mouseHoverList[0].month,d.mouseHoverList[0].day)?d.mouseHoverList[1]={year:b,month:c,day:e}:d.mouseHoverList[0]={year:b,month:c,day:e}}},d.endSelect=function(a){1===a.which&&(d.mouseHoverList[0]&&d.mouseHoverList[1]&&(d.rangeDates[0]=new Date(d.mouseHoverList[0].year,d.mouseHoverList[0].month,d.mouseHoverList[0].day),d.rangeDates[1]=new Date(d.mouseHoverList[1].year,d.mouseHoverList[1].month,d.mouseHoverList[1].day),d.mouseHoverList=[],h(d.rangeDates,d.calendar)),j=!1)},i(188),angular.element(a).bind("resize",function(){i()})}]}}])}();